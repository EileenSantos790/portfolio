<section id="contact">
  <div class="contact-main">
    <div class="headline">
      <h2 data-aos="fade-down">{{ translations.contact.title }}</h2>
      <a class="arrow-up" (mouseover)="arrowIsHovered = true" (mouseout)="arrowIsHovered = false" href="#">
        <img 
          [src]="arrowIsHovered ? '/assets/Why_me_Section/Arrow_up_hover.svg' : '/assets/Why_me_Section/Arrow_up.svg'" 
          alt="Arrow up">
      </a>
    </div>

    <div class="description">
      <div class="contact-me-text" data-aos="fade-right">
        <p>{{ translations.contact.description }}</p>
      </div>
      <div class="contact-data" data-aos="fade-left">
        <div class="email" (mouseover)="mailIsHovered = true" (mouseout)="mailIsHovered = false" (click)="onEmailClick($event)" style="cursor: pointer;">
          <img 
            [src]="mailIsHovered ? '/assets/contact-section/Mail_hover.svg' : '/assets/contact-section/Mail.svg'" 
            alt="Mail">
          <span>{{ translations.contact.email }}: eileen.santos&#64;outlook.de</span>
        </div>
        <div (mouseover)="phoneIsHovered = true" (mouseout)="phoneIsHovered = false" class="phone">
          <img 
            [src]="phoneIsHovered ? '/assets/contact-section/phone_hover.svg' : '/assets/contact-section/phone.svg'" 
            alt="Phone">
          <span>{{ translations.contact.tel }}: 0176 81 49 54 61</span>
        </div>
      </div>
    </div>

    <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" data-aos="fade-up" data-aos-delay="200">
      <div class="input-data">
        <div class="form-field">
          <label for="name">
            <ng-container *ngIf="(contactForm.get('name')?.errors?.['required'] && (contactForm.get('name')?.touched || submitted))">
              <div class="input-error">{{ translations.contact.nameRequired }}</div>
            </ng-container>
            <ng-container *ngIf="(contactForm.get('name')?.errors?.['invalidName'] && !contactForm.get('name')?.errors?.['required'] && (contactForm.get('name')?.touched || submitted))">
              <div class="input-error">Name cannot contain numbers</div>
            </ng-container>
            <ng-container *ngIf="!contactForm.get('name')?.errors || (!contactForm.get('name')?.touched && !submitted)">
              {{ translations.contact.yourName }}
            </ng-container>
          </label>
          <input
            type="text"
            id="name"
            formControlName="name"
            [attr.placeholder]="getDynamicPlaceholder('name')"
            [ngClass]="{
              'responsive-placeholder': true,
              'placeholder-error': contactForm.get('name')?.invalid && (contactForm.get('name')?.touched || submitted),
              'border-error': contactForm.get('name')?.invalid && (contactForm.get('name')?.touched || submitted)
            }"
          />
        </div>

        <div class="form-field">
          <label for="email">
            <ng-container class="input-error" *ngIf="(contactForm.get('email')?.errors?.['required'] && (contactForm.get('email')?.touched || submitted))">
              <div class="input-error">{{ translations.contact.emailRequired }}</div>
            </ng-container>
            <ng-container class="input-error" *ngIf="(contactForm.get('email')?.errors?.['email'] && !contactForm.get('email')?.errors?.['required'] && (contactForm.get('email')?.touched || submitted))">
              <div class="input-error">{{ translations.contact.invalidEmail }}</div>
            </ng-container>
            <ng-container *ngIf="!contactForm.get('email')?.errors || (!contactForm.get('email')?.touched && !submitted)">
              {{ translations.contact.yourEmail }}
            </ng-container>
          </label>
          <input
            type="email"
            id="email"
            formControlName="email"
            [attr.placeholder]="getDynamicPlaceholder('email')"
            [ngClass]="{
              'responsive-placeholder': true,
              'placeholder-error': contactForm.get('email')?.invalid && (contactForm.get('email')?.touched || submitted),
              'border-error': contactForm.get('email')?.invalid && (contactForm.get('email')?.touched || submitted)
            }"
          />
        </div>
      </div>

      <div class="form-field">
        <label for="message">
          <ng-container *ngIf="(contactForm.get('message')?.invalid && (contactForm.get('message')?.touched || submitted))">
            <div class="input-error">{{ translations.contact.messageRequired }}</div>
          </ng-container>
          <ng-container *ngIf="!contactForm.get('message')?.invalid || (!contactForm.get('message')?.touched && !submitted)">
            {{ translations.contact.yourMessage }}
          </ng-container>
        </label>
        <textarea 
          id="message"
          type="text"
          formControlName="message"
          [attr.placeholder]="getDynamicPlaceholder('message')"
          rows="5"
          [ngClass]="{
            'responsive-placeholder': true,
            'placeholder-error': contactForm.get('message')?.invalid && (contactForm.get('message')?.touched || submitted),
            'border-error': contactForm.get('message')?.invalid && (contactForm.get('message')?.touched || submitted)
          }"
        ></textarea>
      </div>

      <div class="form-field checkbox">
        <input 
          type="checkbox" 
          id="customCheckbox" 
          formControlName="privacyPolicy" 
          hidden
        />

        <label
          for="customCheckbox"
          class="custom-checkbox"
        >
          <img 
            (mouseenter)="isCheckboxHovered = true"
            (mouseleave)="isCheckboxHovered = false"
            [src]="getCheckboxImage()" 
            alt="Checkbox state" 
          />
          <p [innerHTML]="translations.contact.privacyPolicyText"></p>
        </label>

        <div class="error" *ngIf="hasPrivacyError()">
          {{ translations.contact.privacyPolicyRequired }}
        </div>
      </div>

      <div class="button-wrapper">
        <button [ngClass]="{ 'disabled': contactForm.invalid }" type="submit">
          {{ translations.contact.sendMessage }}
        </button>
      </div>
    </form>

    <a class="arrow-up-mobile" (mouseover)="arrowMobileIsHovered = true" (mouseout)="arrowMobileIsHovered = false" href="#">
      <img 
        [src]="arrowMobileIsHovered ? '/assets/Why_me_Section/Arrow_up_hover.svg' : '/assets/Why_me_Section/Arrow_up.svg'" 
        alt="Arrow up">
    </a>
  </div>

  <div class="toast" *ngIf="showToast">
    <div class="toast-content">
      <img src="/assets/contact-section/Check_Box_3.svg" alt="Success icon">
      <p>{{ translations.contact.messageSent }}</p>
    </div>
  </div>
</section>
